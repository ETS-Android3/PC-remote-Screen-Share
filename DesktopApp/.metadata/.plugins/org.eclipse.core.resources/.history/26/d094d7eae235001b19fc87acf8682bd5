package DesktopAppPack;
import java.awt.AWTException;
import java.awt.Canvas;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;


public class display  {
	public static void main(String[] args) throws AWTException, IOException
	{       
		Rectangle captureArea=new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()); //outside loop    
	        new Thread(new Runnable() {

				@Override
				public void run() {
					Robot captureRobot=null;
					try {
						captureRobot = new Robot();
					} catch (AWTException e1) {
						e1.printStackTrace();
					}   
					Thread t3=Thread.currentThread();
					BufferedImage Image;
					while(true)
					{
						Image=captureRobot.createScreenCapture(captureArea);        
			        	try {
							ImageIO.write(Image, "PNG", new File("testImage.png"));
							t3.sleep(250);
						} catch (Exception e) {
							e.printStackTrace();
						} 
					}
					}
	        }).start();
	    
	       
	       new Thread(new Runnable() {

			@Override
			public void run() {
				Thread t=Thread.currentThread();
				JFrame f=new JFrame();  
				f.setVisible(true); //might not be correct place
			    JLabel picLabel = new JLabel(new ImageIcon("testImage.png")); //outside loop
				f.add(picLabel);
				f.setSize(400,400);
				while(true)	
        		{	   
        	           picLabel.setIcon(new ImageIcon("testImage.png"));
        	           picLabel.paintImmediately(captureArea);
        	           try {
       					t.sleep(250);
       				} catch (InterruptedException e) {
       					// TODO Auto-generated catch block
       					e.printStackTrace();
       				}
        		}
			}	   
	       }).start();
	}
}

                   
    
    